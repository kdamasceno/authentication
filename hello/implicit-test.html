<link rel="stylesheet" href="styles/bootstrap.min.css">
<!DOCTYPE html>
<html lang="en">
    <HEAD>
        <script src="js/openidconnect.js"></script>
        
        <script>            
            var clientInfo = {
                client_id : '@!57E7.F422.1BEC.8661!0001!2917.B555!0008!1057.2149.C76E.504A',
                redirect_uri : 'https://ariramba.tecgraf.puc-rio.br:8443/hello/callbackpage.html'
            };
            var providerInfo = OIDC.discover('https://gluuserver.tecgraf.puc-rio.br');
            OIDC.setClientInfo(clientInfo);
            OIDC.setProviderInfo(providerInfo);
            OIDC.storeInfo(providerInfo, clientInfo);
            // Remove State and Nonce from previous session
            sessionStorage.removeItem('state');
            sessionStorage.removeItem('nonce');
            loginRequest = OIDC.generateLoginRequest({scope : 'openid user_name',
            response_type : 'token id_token', display: 'page', prompt: 'login'});
        </script>

    </HEAD>

    <BODY>
      <div class="container" style="margin-bottom: 50px;">
        <h1>Implicit Flow Test Login Page</h1>
        <br>
        <b>clientInfo</b>
        <div id="clientInfo">
          clientInfo not found
        </div>
        <script type="text/javascript">
        document.getElementById('clientInfo').innerHTML = JSONObjToHTMLTable(clientInfo);
        </script>
        <b>loginRequest</b>
        <div id="loginRequest">
          loginRequest not generated yet
        </div>
        <script type="text/javascript">
        document.getElementById('loginRequest').innerHTML = JSONObjToHTMLTable(loginRequest);
        </script>
        <br>
        <div class="buttons">
          <button onClick="OIDC.login( {scope : 'openid user_name',
          response_type : 'token id_token', display: 'page', prompt: 'login'} );"
          type="button" class="btn btn-success" >Authenticate</button>
        </div>
      </div>
    </BODY>

</HTML>